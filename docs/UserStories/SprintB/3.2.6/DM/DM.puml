@startuml US_3.2.6_Domain_Model

!define AGGREGATE_ROOT_COLOR #FFDDAA
!define VALUE_OBJECT_COLOR #E8F5E9

class User <<Aggregate Root>> AGGREGATE_ROOT_COLOR {
    - UserId id
    - Email email
    - GoogleId? googleId
    - UserRole role
    - UserStatus status
    - ActivationToken activationToken
    + ActivateAccount(googleId)
    + IsActivationTokenValid() : bool
}

class UserId <<Value Object>> VALUE_OBJECT_COLOR {
    - Guid value
    + UserId(value)
}

class Email <<Value Object>> VALUE_OBJECT_COLOR {
    - string value
    + Email(value)
}

class GoogleId <<Value Object>> VALUE_OBJECT_COLOR {
    - string value
    + GoogleId(value)
}

class UserRole <<Value Object>> VALUE_OBJECT_COLOR {
    - string value
    + UserRole(value)
}

class UserStatus <<Value Object>> VALUE_OBJECT_COLOR {
    - string value
    + UserStatus(value)
}

class ActivationToken <<Value Object>> VALUE_OBJECT_COLOR {
    - string value
    - DateTime expiresAt
    + ActivationToken(value, expiresAt)
    + IsValid() : bool
}

User "1" *-- "1" UserId : id
User "1" *-- "1" Email : email
User "1" *-- "0..1" GoogleId : googleId
User "1" *-- "1" UserRole : role
User "1" *-- "1" UserStatus : status
User "1" *-- "1" ActivationToken : activationToken

note right of User
  New user activation flow:
  1. Receives email with link
  2. Clicks activation link
  3. Authenticates via Google
  4. Account activated
end note

@enduml
