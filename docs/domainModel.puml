@startuml domainModel

'=======================
' AGGREGATES
'=======================

' --- PORT AGGREGATE ---
package "Port Aggregate" {
  ' Value Objects
  class PortName <<value object>> {
    -value: string
  }
  
  class DockName <<value object>> {
    -value: string
  }
  
  class Length <<value object>> {
    -value: double
  }
  
  class MaxCraneSlots <<value object>> {
    -value: int
  }
  
  class OperationalWindow <<value object>> {
    -startTime: DateTime
    -endTime: DateTime
  }
  
  class OperationalCapacity <<value object>> {
    -capacity: int
  }
  
  class CurrentAvailabilityStatus <<enumeration>> {
    AVAILABLE
    UNAVAILABLE
    MAINTENANCE
  }
  
  class OperatingStaffRequirements <<value object>> {
    -minimumStaff: int
  }
  
  class SetupTime <<value object>> {
    -duration: TimeSpan
  }
  
  ' Entities
  class Port <<aggregate root>> {
    -portId: Guid
  }

  class Dock <<entity>> {
    -dockId: Guid
  }

  class ContainerYard <<entity>> {
    -yardId: Guid
  }

  class Warehouse <<entity>> {
    -warehouseId: Guid
  }

  class Equipment <<entity>> {
    -equipmentId: Guid
  }

  class STSCrane <<entity>> {
  }

  class YardGantryCrane <<entity>> {
  }

  class Truck <<entity>> {
  }
  
  STSCrane --|> Equipment
  YardGantryCrane --|> Equipment
  Truck --|> Equipment
}

' --- STAFF AGGREGATE ---
package "Staff Aggregate" {
  ' Value Objects
  class MechaNumber <<value object>> {
    -value: string
  }
  
  class StaffName <<value object>> {
    -value: string
  }
  
  class Email <<value object>> {
    -value: string
  }
  
  class PhoneNumber <<value object>> {
    -value: string
  }
  
  class Qualification <<value object>> {
    -type: string
  }
  
  class CurrentStatus <<enumeration>> {
    AVAILABLE
    UNAVAILABLE
    ON_LEAVE
    TRAINING
    TEMPORARILY_REASSIGNED
  }
  
  class WorkSchedule <<value object>> {
    -startTime: DateTime
    -endTime: DateTime
  }
  
  ' Entities
  class Staff <<aggregate root>> {
    -mechaNumber: MechaNumber <<id>>
  }
}

' --- SHIPPING AGENT AGGREGATE ---
package "ShippingAgentOrg Aggregate" {
  ' Value Objects
  class AgentName <<value object>> {
    -value: string
  }
  
  class AgentEmail <<value object>> {
    -value: string
  }
  
  class RequestStatus <<enumeration>> {
    SUBMITTED
    APPROVED
    REJECTED
  }
  
  ' Entities
  class ShippingAgentOrg <<aggregate root>> {
    -orgId: Guid
  }

  class ShippingAgentRep <<entity>> {
    -repId: Guid
  }

  class ShippingAgentOrgRequest <<entity>> {
    -requestId: Guid
    -vesselImo: IMO
  }
}

' --- VESSEL AUTHORIZATION AGGREGATE ---
package "VesselAuthorization Aggregate" {
  ' Value Objects
  class isActive <<value object>> {
    -value: bool
  }
  
  class ValidFrom <<value object>> {
    -date: DateTime
  }
  
  class ValidTo <<value object>> {
    -date: DateTime
  }
  
  ' Entities
  class VesselAuthorization <<aggregate root>> {
    -authorizationId: Guid
    -orgId: Guid
    -vesselImo: IMO
  }
}

' --- VESSEL TYPE AGGREGATE ---
package "VesselType Aggregate" {
  ' Value Objects
  class TypeName <<value object>> {
    -value: string
  }
  
  class TypeDescription <<value object>> {
    -value: string
  }
  
  class TypeCapacity <<value object>> {
    -value: int
  }
  
  class MaxRows <<value object>> {
    -value: int
  }
  
  class MaxBays <<value object>> {
    -value: int
  }
  
  class MaxTiers <<value object>> {
    -value: int
  }
  
  ' Entities
  class VesselType <<aggregate root>> {
    -vesselTypeId: Guid
  }
}

' --- VESSEL AGGREGATE ---
package "Vessel Aggregate" {
  ' Value Objects
  class IMO <<id>> {
    -number: string
  }
  
  class Size <<value object>> {
    -value: double
  }
  
  class CargoCapacity <<value object>> {
    -teu: int
  }
  
  class VesselName <<value object>> {
    -name: string
  }
  
  class MaxTeu <<value object>> {
    -value: int
  }
  
  ' Entities
  class Vessel <<aggregate root>> {
    -ownerId: Guid
    -vesselTypeId: Guid
  }
}

' --- VESSEL VISIT AGGREGATE ---
package "VesselVisit Aggregate" {
  ' Value Objects
  class ExpectedTimeOfArrival <<value object>> {
    -dateTime: DateTime
  }
  
  class ExpectedTimeOfDeparture <<value object>> {
    -dateTime: DateTime
  }
  
  class isHazardousFlag <<value object>> {
    -value: bool
  }
  
  class visitStatus <<enumeration>> {
    PENDING
    ACCEPTED
    REJECTED
  }
  
  class RejectionReason <<value object>> {
    -reason: string
  }
  
  class SafetyOfficersNames <<value object>> {
    -names: List<string>
  }
  
  class CaptainName <<value object>> {
    -value: string
  }
  
  class OriginLocation <<value object>> {
    -location: string
  }
  
  class DestinationLocation <<value object>> {
    -location: string
  }
  
  class CargoType <<value object>> {
    -type: string
  }
  
  class Description <<value object>> {
    -text: string
  }
  
  class ContainersContent <<value object>> {
    -content: string
  }
  
  ' Entities
  class VesselVisit <<aggregate root>> {
    -visitId: Guid
  }

  class CrewInfo <<entity>> {
    -crewCount: int
  }

  class DockAssignment <<entity>> {
    -assignmentId: Guid
    -assignedDockId: Guid
  }

  class CargoManifest <<entity>> {
    -manifestId: Guid
    -manifestType: string
  }

  class ManifestEntry <<entity>> {
    -entryId: Guid
  }

  class Container <<entity>> {
    -isoCode: string <<id>>
    -hazmat: bool
    -sizeTeu: int
  }
}

'=======================
' RELATIONSHIPS & CARDINALITIES
'=======================

' PORT AGGREGATE
Port "1" *-- "0..*" Dock : contains >
Port "1" *-- "0..*" ContainerYard : contains >
Port "1" *-- "0..*" Warehouse : contains >
Port "1" *-- "0..*" YardGantryCrane : has >
Port "1" *-- "0..*" Truck : has >
Dock "1" *-- "1..*" STSCrane : has >

' Port Aggregate - Value Object Relationships
Port "1" *-- "1" PortName
Dock "1" *-- "1" DockName
Dock "1" *-- "1" Length
Dock "1" *-- "1" MaxCraneSlots
Equipment "1" *-- "1" OperationalWindow
Equipment "1" *-- "1" OperationalCapacity
Equipment "1" *-- "1" CurrentAvailabilityStatus
Equipment "1" *-- "1" OperatingStaffRequirements
Equipment "1" *-- "1" SetupTime

' SHIPPING AGENT AGGREGATE
ShippingAgentOrg "1" *-- "1..*" ShippingAgentRep : employs >
ShippingAgentOrg "1" *-- "0..*" ShippingAgentOrgRequest : submits >
ShippingAgentOrg "1" --> "0..*" Vessel : owns (by ID) >

' ShippingAgentOrg Aggregate - Value Object Relationships
ShippingAgentOrg "1" *-- "1" AgentName
ShippingAgentRep "1" *-- "1" AgentName
ShippingAgentRep "1" *-- "1" AgentEmail
ShippingAgentOrgRequest "1" *-- "1" RequestStatus
ShippingAgentOrgRequest "1" --> "0..1" Vessel : relates to (by ID) >

' VESSEL AUTHORIZATION AGGREGATE
VesselAuthorization "1" *-- "1" isActive
VesselAuthorization "1" *-- "1" ValidFrom
VesselAuthorization "1" *-- "1" ValidTo
VesselAuthorization "1" --> "1" Vessel : authorizes (by ID) >
VesselAuthorization "1" --> "1" ShippingAgentOrg : granted to (by ID) >

' VESSEL TYPE AGGREGATE
VesselType "1" *-- "1" TypeName
VesselType "1" *-- "1" TypeDescription
VesselType "1" *-- "1" TypeCapacity
VesselType "1" *-- "1" MaxRows
VesselType "1" *-- "1" MaxBays
VesselType "1" *-- "1" MaxTiers

' VESSEL AGGREGATE
' Vessel Aggregate - Value Object Relationships
Vessel "1" *-- "1" IMO
Vessel "1" *-- "1" VesselName
Vessel "1" *-- "1" MaxTeu
Vessel "1" *-- "1" Size
Vessel "1" *-- "1" CargoCapacity
Vessel "1" --> "1" VesselType : classified by (by ID) >

' VESSEL VISIT AGGREGATE
VesselVisit "1" *-- "1" CrewInfo : includes >
VesselVisit "1" *-- "0..1" DockAssignment : has >
VesselVisit "1" *-- "0..2" CargoManifest : includes >
VesselVisit "1" --> "1" Vessel : refers to (by ID) >
DockAssignment "1" --> "1" Dock : assigns to (by ID) >

' CARGO MANIFEST (can be part of VesselVisit or independent)
CargoManifest "1" *-- "0..*" ManifestEntry : contains >
ManifestEntry "1" *-- "1" Container : references >

' VesselVisit Aggregate - Value Object Relationships
VesselVisit "1" *-- "1" ExpectedTimeOfArrival
VesselVisit "1" *-- "1" ExpectedTimeOfDeparture
VesselVisit "1" *-- "1" isHazardousFlag
VesselVisit "1" *-- "1" visitStatus
VesselVisit "1" *-- "0..1" RejectionReason
CrewInfo "1" *-- "1" CaptainName
CrewInfo "1" *-- "1" SafetyOfficersNames
ManifestEntry "1" *-- "1" OriginLocation
ManifestEntry "1" *-- "1" DestinationLocation
Container "1" *-- "1" CargoType
Container "1" *-- "1" ContainersContent
Container "1" *-- "1" Description

' CROSS-AGGREGATE REFERENCES (by ID)
ShippingAgentOrg "1" --> "0..*" VesselVisit : submits >
ShippingAgentRep "1" --> "0..*" VesselVisit : submits on behalf >

' STAFF AGGREGATE - Value Object Relationships
Staff "1" *-- "1" MechaNumber
Staff "1" *-- "1" StaffName
Staff "1" *-- "1" Email
Staff "1" *-- "1" PhoneNumber
Staff "1" *-- "1" Qualification
Staff "1" *-- "1" CurrentStatus
Staff "1" *-- "1" WorkSchedule

' STAFF MANAGEMENT (cross-aggregate reference)
Staff "1" --> "0..*" Equipment : operates >

@enduml
